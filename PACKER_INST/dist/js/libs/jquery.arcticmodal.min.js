!function(l){var a={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"#000",opacity:.6}},container:{block:void 0,tpl:'<div class="arcticmodal-container"><table class="arcticmodal-container_i"><tr><td class="arcticmodal-container_i2"></td></tr></table></div>'},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2e3,ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:l.noop,afterOpen:l.noop,beforeClose:l.noop,afterClose:l.noop,afterLoading:l.noop,afterLoadingOnShow:l.noop,errorLoading:l.noop},i=0,d=l([]),s=function(e,o){var a=!0;return l(e).each(function(){l(o.target).get(0)==l(this).get(0)&&(a=!1),0==l(o.target).closest("HTML",l(this).get(0)).length&&(a=!1)}),a},f={getParentEl:function(e){var o=l(e);return o.data("arcticmodal")?o:(o=l(e).closest(".arcticmodal-container").data("arcticmodalParentEl"))||!1},transition:function(e,o,a,r){switch(r=null==r?l.noop:r,a.type){case"fade":"show"==o?e.fadeIn(a.speed,r):e.fadeOut(a.speed,r);break;case"none":"show"==o?e.show():e.hide(),r()}},prepare_body:function(e,o){l(".arcticmodal-close",e.body).unbind("click.arcticmodal").bind("click.arcticmodal",function(){return o.arcticmodal("close"),!1})},init_el:function(o,e){var a=o.data("arcticmodal");if(!a){if(i++,(a=e).modalID=i,a.overlay.block=l(a.overlay.tpl),a.overlay.block.css(a.overlay.css),a.container.block=l(a.container.tpl),a.body=l(".arcticmodal-container_i2",a.container.block),e.clone?a.body.html(o.clone(!0)):(o.before('<div id="arcticmodalReserve'+a.modalID+'" style="display: none" />'),a.body.html(o)),f.prepare_body(a,o),a.closeOnOverlayClick&&a.overlay.block.add(a.container.block).click(function(e){s(l(">*",a.body),e)&&o.arcticmodal("close")}),a.container.block.data("arcticmodalParentEl",o),o.data("arcticmodal",a),d=l.merge(d,o),l.proxy(u.show,o)(),"html"==a.type)return o;if(null!=a.ajax.beforeSend){var r=a.ajax.beforeSend;delete a.ajax.beforeSend}if(null!=a.ajax.success){var t=a.ajax.success;delete a.ajax.success}if(null!=a.ajax.error){var c=a.ajax.error;delete a.ajax.error}var n=l.extend(!0,{url:a.url,beforeSend:function(){null==r?a.body.html('<div class="arcticmodal-loading" />'):r(a,o)},success:function(e){o.trigger("afterLoading"),a.afterLoading(a,o,e),null==t?a.body.html(e):t(a,o,e),f.prepare_body(a,o),o.trigger("afterLoadingOnShow"),a.afterLoadingOnShow(a,o,e)},error:function(){o.trigger("errorLoading"),a.errorLoading(a,o),null==c?(a.body.html(a.errors.tpl),l(".arcticmodal-error",a.body).html(a.errors.ajax_unsuccessful_load),l(".arcticmodal-close",a.body).click(function(){return o.arcticmodal("close"),!1}),a.errors.autoclose_delay&&setTimeout(function(){o.arcticmodal("close")},a.errors.autoclose_delay)):c(a,o)}},a.ajax);a.ajax_request=l.ajax(n),o.data("arcticmodal",a)}},init:function(e){if(e=l.extend(!0,{},a,e),!l.isFunction(this))return this.each(function(){f.init_el(l(this),l.extend(!0,{},e))});if(null!=e)if(""!=e.type)switch(e.type){case"html":if(""==e.content)return void l.error('jquery.arcticmodal: Don\'t set parameter "content"');var o=e.content;return e.content="",f.init_el(l(o),e);case"ajax":return""==e.url?void l.error('jquery.arcticmodal: Don\'t set parameter "url"'):f.init_el(l("<div />"),e)}else l.error('jquery.arcticmodal: Don\'t set parameter "type"');else l.error("jquery.arcticmodal: Uncorrect parameters")}},u={show:function(){var e=f.getParentEl(this);if(!1!==e){var o=e.data("arcticmodal");if(o.overlay.block.hide(),o.container.block.hide(),l("BODY").append(o.overlay.block),l("BODY").append(o.container.block),o.beforeOpen(o,e),e.trigger("beforeOpen"),"hidden"!=o.wrap.css("overflow")){o.wrap.data("arcticmodalOverflow",o.wrap.css("overflow"));o.wrap.outerWidth(!0),o.wrap.outerWidth(!0)}return d.not(e).each(function(){l(this).data("arcticmodal").overlay.block.hide()}),f.transition(o.overlay.block,"show",1<d.length?{type:"none"}:o.openEffect),f.transition(o.container.block,"show",1<d.length?{type:"none"}:o.openEffect,function(){o.afterOpen(o,e),e.trigger("afterOpen")}),e}l.error("jquery.arcticmodal: Uncorrect call")},close:function(){if(!l.isFunction(this))return this.each(function(){var e=f.getParentEl(this);if(!1!==e){var o=e.data("arcticmodal");!1!==o.beforeClose(o,e)&&(e.trigger("beforeClose"),d.not(e).last().each(function(){l(this).data("arcticmodal").overlay.block.show()}),f.transition(o.overlay.block,"hide",1<d.length?{type:"none"}:o.closeEffect),f.transition(o.container.block,"hide",1<d.length?{type:"none"}:o.closeEffect,function(){o.afterClose(o,e),e.trigger("afterClose"),o.clone||l("#arcticmodalReserve"+o.modalID).replaceWith(o.body.find(">*")),o.overlay.block.remove(),o.container.block.remove(),e.data("arcticmodal",null),l(".arcticmodal-container").length||(o.wrap.data("arcticmodalOverflow")&&o.wrap.css("overflow",o.wrap.data("arcticmodalOverflow")),o.wrap.css("marginRight",0))}),"ajax"==o.type&&o.ajax_request.abort(),d=d.not(e))}else l.error("jquery.arcticmodal: Uncorrect call")});d.each(function(){l(this).arcticmodal("close")})},setDefault:function(e){l.extend(!0,a,e)}};l(function(){a.wrap=l(document.all&&!document.querySelector?"html":"body")}),l(document).bind("keyup.arcticmodal",function(e){var o=d.last();o.length&&(o.data("arcticmodal").closeOnEsc&&27===e.keyCode&&o.arcticmodal("close"))}),l.arcticmodal=l.fn.arcticmodal=function(e){return u[e]?u[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void l.error("jquery.arcticmodal: Method "+e+" does not exist"):f.init.apply(this,arguments)}}(jQuery);